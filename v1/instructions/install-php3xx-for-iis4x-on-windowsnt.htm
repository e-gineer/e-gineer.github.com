<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Strict//EN">
<!-- #BeginTemplate "../../v2/presentation/template.dwt" -->
<html>
<head>
<!-- #BeginEditable "doctitle" -->
<title>Installing PHP 3.x.x for IIS 4.x on Windows NT</title>
<!-- #EndEditable -->
<link rel="stylesheet" type="text/css" href="../../v2/presentation/TortoiseRocket.css"/>
<link rel="alternate" type="application/rss+xml" title="Nathan @ e-gineer - RSS" href="../../v2/blog/rss.xml" />
<link rel="shortcut icon" href="../../v2/presentation/TortoiseRocket.ico" type="image/ico"/>
</head>
<body>

<div id="contentPageWrapper">

  <div id="contentPageHeader">
    <div id="contentPageHeaderBar">
      <div id="contentPageHeaderLinkBlog">
		<a href="../../v2/blog/" class="contentPageHeaderLink">Blog</a></div>
      <div id="contentPageHeaderLinkNathan"><a href="../../nathan/" class="contentPageHeaderLink">Nathan</a></div>
      <div id="contentPageHeaderLinkArchive"><a href="../../archive/" class="contentPageHeaderLink">Archive</a></div>
    </div>
    <a href="../../">
	<img id="contentPageEgineerImage" src="../../v2/presentation/TortoiseRocket-Logo.gif" alt="e-gineer" width="320" height="127"/></a>
  </div>

  <div id="googleAd">  
    <script type="text/javascript"><!--
    google_ad_client = "pub-4825523674148460";
    /* 728x90, created 4/13/09 */
    google_ad_slot = "2745493970";
    google_ad_width = 728;
    google_ad_height = 90;
    //-->
    </script>
    <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
  </div>

  <div id="contentPageBody">
  <!-- #BeginEditable "body" -->

<h1>Installing PHP 3.x.x for IIS 4.x on Windows NT</h1>

<p>

<em>by <a href="../../nathan/">Nathan Wallace</a></em> (Oct 19, 1999)

<p>
<br>

<h2>Introduction</h2>

These instructions assume that you have a standard IIS 4 installation on Windows NT.  Thanks go to Ted and Randy for their help compiling these instructions.

<p>
<br>

<h2>Getting PHP</h2>

<ol>

<li>Make a directory, c:\php.

<p>

<li>Download the PHP distribution from <a href="http://www.php.net/download-php.php3">your nearest mirror</a>.  Here's a direct link to <a href="http://www.php.net/distributions/php-3.0.11-win32.zip">php-3.0.11-win32.zip</a>.

<p>

<li>Save the PHP zip file into the directory c:\php

</ol>

<p>
<br>

<h2>Installing PHP</h2>

<ol>

<li>Open Windows Explorer from your Start Menu.

<p>

<li>Go to the c:\php folder.

<p>

<li>Double click on the php zip file, php-3.0.11-win32.zip or equivalent.  Hopefully you have winzip installed and this will work.  Otherwise, you need to get winzip from somewhere.

<p>

<li>Extract the files out into the c:\php directory.

</ol>

<p>
<br>

<h2>Configuring PHP</h2>

<ol>

<li>Copy the distribution PHP3 ini file into the c:\windows directory as php3.ini.  Here are the commands in a DOS box.  If you installed windows into some non-standard directory like c:\win98, then you must use that directory instead.  Make sure that you rename the ini file!!!
<pre>
    cd c:\php
    copy php3.ini-dist c:\windows\php3.ini
</pre>

<p>

<li>Now we have to edit the PHP ini file.  First we must tell PHP where it can find the dll's for the extensions.  On line 100:
<pre>
    ExtensionDir = "c:\php"
</pre>

<p>

<li>If you plan to use MySQL (or some other modules) then you must enable those extensions.  You can do this by uncommenting the relevant lines.  For MySQL it should be on line 115:
<pre>
    extension=php3_mysql.dll
</pre>
You may also need to set some of the MySQL parameters in the ini file.

</ol>

<p>
<br>

<h2>Configuring IIS to use PHP</h2>

<ol>

<li>In Internet Service Manager (MMC), select the Web site or the starting point directory of an application. 

<p>

<li>Open the directory's property sheets (by right clicking and selecting properties), and then click the Home Directory, Virtual Directory, or Directory tab. 

<p>

<li>Click the Configuration button, and then click the App Mappings tab. 

<p>

<li>Click Add, and in the Executable box, type:
<pre>
    c:\php\php.exe %s %s
</pre>
You MUST have the %s %s on the end, PHP will not function properly if you fail to do this.

<p>

<li>In the Extension box, type the file name extension you want associated with PHP scripts. (You must repeat step 5 and 6 for each extension you want accociated with PHP scripts. (.php3 and .phtml are common choices)

<p>

<li>Set up the appropriate security. (This is done in Internet Service Manager), and if your NT Server uses NTFS file system, add execute rights for I_USR_ to the directory that contains php.exe. 

</ol>

<p>
<br>

<h2>Checking it works</h2>

<ol>

<li>Restart your IIS server if you haven't already done so.

<p>

<li>Let's create a test PHP file (test.php3) in the root directory of the web server.  This file should contain a single line like this:
<pre>
    &lt;?php phpinfo() ?&gt;
</pre>

<p>

<li>Point your browser at http://localhost/test.php3 (or equivalent on your machine).  If you get an error then you have done something wrong.  Otherwise, you should see a page that looks something like this (link removed).

</ol>

  <!-- #EndEditable -->
  </div>
  
<?php
// import the footer from a dynamic blog page to ensure we have the latest archive links
$html = file_get_contents($_SERVER['DOCUMENT_ROOT'].'/e-gineer.com/v2/blog/2009/03/lachlan-and-then-there-were-4.htm');
echo substr($html, strpos($html, '<div id="contentPageFooter">'));
?>
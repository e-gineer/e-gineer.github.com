<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Strict//EN">
<!-- #BeginTemplate "../../v2/presentation/template.dwt" -->
<html>
<head>
<!-- #BeginEditable "doctitle" -->
<title>Starting MySQL Automatically on Red Hat Linux</title>
<!-- #EndEditable -->
<link rel="stylesheet" type="text/css" href="../../v2/presentation/TortoiseRocket.css"/>
<link rel="alternate" type="application/rss+xml" title="Nathan @ e-gineer - RSS" href="../../v2/blog/rss.xml" />
<link rel="shortcut icon" href="../../v2/presentation/TortoiseRocket.ico" type="image/ico"/>
</head>
<body>

<div id="contentPageWrapper">

  <div id="contentPageHeader">
    <div id="contentPageHeaderBar">
      <div id="contentPageHeaderLinkBlog">
		<a href="../../v2/blog/" class="contentPageHeaderLink">Blog</a></div>
      <div id="contentPageHeaderLinkNathan"><a href="../../nathan/" class="contentPageHeaderLink">Nathan</a></div>
      <div id="contentPageHeaderLinkArchive"><a href="../../archive/" class="contentPageHeaderLink">Archive</a></div>
    </div>
    <a href="../../">
	<img id="contentPageEgineerImage" src="../../v2/presentation/TortoiseRocket-Logo.gif" alt="e-gineer" width="320" height="127"/></a>
  </div>

  <div id="googleAd">  
    <script type="text/javascript"><!--
    google_ad_client = "pub-4825523674148460";
    /* 728x90, created 4/13/09 */
    google_ad_slot = "2745493970";
    google_ad_width = 728;
    google_ad_height = 90;
    //-->
    </script>
    <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
  </div>

  <div id="contentPageBody">
  <!-- #BeginEditable "body" -->

<h1>Starting MySQL Automatically on Red Hat Linux</h1>

<em>by <a href="../../nathan/">Nathan Wallace</a></em> (Oct 25, 1999)<br>
<em>and Dean Peters</em> (Dec 5, 2000)

<p>
<br>

<h2>Introduction</h2>

After you've installed MySQL it's often a good and convenient idea to make it start and stop automatically with the machine.  These instructions are specific for <a href="http://www.redhat.com">Red Hat Linux</a> and it's variants since different Linux distributions tend to layout the start up scripts differently.

<p>

The example script is based on my <a href="install-mysql3xx-on-linux.htm">MySQL installation instructions</a>.

<p>
<br>

<h2>Making MySQL Start and Stop Automatically</h2>

<ol>

<li>You need to be root to do these steps:
<pre>
    su root
</pre>

<p>

<li>Now go to the MySQL directory:
<pre>
    cd /usr/local/mysql
</pre>

<p>

<li>First we have to put the start up script with all the others.
<pre>
    cp support-files/mysql.server /etc/rc.d/init.d/mysql
</pre>

<p>

<li>To make the script be run on machine start up we need to create a symbolic link to it.
<pre>
    cd /etc/rc.d/rc3.d
    ln -s ../init.d/mysql S85mysql
    cd /etc/rc.d/rc5.d
    ln -s ../init.d/mysql S85mysql
</pre>

<p>

<li>Now the links to make MySQL shut down:
<pre>
    cd /etc/rc.d/rc0.d
    ln -s ../init.d/mysql K85mysql
    cd /etc/rc.d/rc6.d
    ln -s ../init.d/mysql K85mysql
</pre>

<p>

<li>The mysql script must have execute permissions before it will work.
<pre>
    cd ../init.d
    chmod +x mysql
</pre>

<p>

<li>You may need to change the user that mysql should be run as.  Look for the mysqld_user variable
about half way through the script and change it to be the appropriate user.  If you used our MySQL
install instructions the user should be mysql.

<p>

<li>You can now reboot your machine to test this setup.
<pre>
    shutdown -r now
</pre>

<p>

<li>When the machine starts, check that the mysql daemon actually started:
<pre>
    cd /usr/local/mysql
    bin/mysqladmin -uroot -p[admin password  <em>eg. mypass</em>] ping
</pre>
Hopefully you get this response:
<pre>
    mysqld is alive
</pre>
If you get a message like this then something went wrong:
<pre>
    mysqladmin: connect to server at 'localhost' failed
    error: 'Can't connect to local MySQL server (2)'
    Check that mysqld is running and that the socket '/tmp/mysql.sock' exists!
</pre>

</ol>

  <!-- #EndEditable -->
  </div>
  
<?php
// import the footer from a dynamic blog page to ensure we have the latest archive links
$html = file_get_contents($_SERVER['DOCUMENT_ROOT'].'/e-gineer.com/v2/blog/2009/03/lachlan-and-then-there-were-4.htm');
echo substr($html, strpos($html, '<div id="contentPageFooter">'));
?>